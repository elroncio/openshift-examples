FROM ubi8/ubi 

LABEL io.k8s.description="Simple gin app" \
	io.k8s.display-name="GIT app server" \
	io.openshift.expose-services="8080:http" \
	io.openshift.tags="golang, gin"

EXPOSE 8080

RUN yum install golang git -y

ARG REPO=github.com/elroncio/openshift-examples

RUN git clone ${REPO}

WORKDIR /openshift-examples/simple-app

RUN go build -o app main.go

RUN chgrp -R 0 /openshift-examples/simple-app && \
    chmod -R g=u /openshift-examples/simple-app

USER 1001

ENV GIN_MODE=debug

ENTRYPOINT /openshift-examples/simple-app/app
